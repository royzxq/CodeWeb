jQuery(document).ready(function(t){t("#sidebar").resizable(),t("#searchArea label p").css("text-align","center"),t.supersized({slides:[{image:"/js/build/black_dark_shadow.jpg"}]})}),function(){"use strict";function t(){for(var t=0;t<h.nodes.length;t++)p[h.nodes[t].label]=h.nodes[t];d=c.selectAll(".link").data(h.edges).enter().append("path").attr("class","link").attr("fill","none").attr("stroke",function(t){return"yellow"}).attr("d",function(t){var e=p[t.target].x-p[t.source].x,a=p[t.target].y-p[t.source].y,r=Math.sqrt(e*e+a*a),n="M"+p[t.source].x+","+p[t.source].y+"A"+r+","+r+" 0 0,1 "+p[t.target].x+","+p[t.target].y;return n}),u=c.selectAll(".node").data(h.nodes).enter().append("g").attr("class","node").attr("transform",function(t){return"translate("+t.x+","+t.y+")"}).on("click",function(t){window.location="#"+t.label,n.call(this,t.label)}),u.append("circle").attr("r",function(t){var e=t.label.split("_").join(" ");return g.push(e),t.size/1.5}).style("fill",function(t){return t.color}),u.append("text").attr("class",function(t){return t.size>18?"huge":"small"}).attr("dx",0).attr("dy","0.2em").style("text-anchor","middle").style("font-size",12).style("font-weight","bold").text(function(t){if(t.size>18){var e=t.label.split("_")[0];return e}return null})}function e(){c.attr("transform","translate("+d3.event.translate+") scale("+d3.event.scale+")")}function a(){u.attr("class","node"),d.attr("class","link"),jQuery(".node").css("-webkit-opacity",.2)}function r(t,e){if(a(),u.attr("class","node background"),jQuery(this).attr("class","node hover").css("-webkit-opacity",1),d.filter(function(e){return e.source===t.label||e.target===t.label}).attr("class","link hover").each(function(t){u.filter(function(e){return e.label===t.target||e.label===t.source}).attr("class","node hover")}),e){var r=null;r=[t.x,t.y];var n=-1*r[0]+i/2,l=-1*r[1]+s/2;o.translate([n,l]),o.scale(1),c.transition().attr("transform","translate("+n+", "+l+") scale(1)")}}function n(t,e){t=p[t];var a=t.label.split("_").join(" ");$("#description").html("Title: "+a+"<br> PageRank: "+parseFloat(t.attributes.PageRank).toFixed(5)),jQuery.ajax({type:"GET",url:"/probs/"+a}).then(function(t){$("#description").append("<br><a href='"+t.link+"'> Link </a>")}),r.call(this,t,e)}function l(){var t=0;jQuery("circle").each(function(e){jQuery(this).attr("r",function(){return y[t++]*jQuery("#slider").slider("value")/8})})}var i=window.innerWidth,s=window.innerHeight,o=d3.behavior.zoom().scaleExtent([-20,20]).on("zoom",e),c=d3.select("body").append("svg").attr("shape-rendering","auto").attr("width",i).attr("height",s).append("g").call(o).append("g");location.hash||(o.scale(.6),o.translate([850,700]),c.attr("transform","translate(830, 700) scale(0.7)"));var u,d,h,f=10*i,p=(c.append("rect").attr("class","overlay").attr("width",10*i+f).attr("height",10*s+f).attr("x",-f).attr("y",-f).on("click",a),{}),y=[],g=[];d3.json("/js/Force.json",function(e,a){h=a,t(),jQuery("circle").each(function(t){y.push(jQuery(this).attr("r"))})}),jQuery("#search").keypress(function(t){if(13==t.which){var e=jQuery("#search").val();window.location="#"+e,e=e.split(" ").join("_"),n(e,!0)}}),jQuery("#slider").slider({orientation:"horizantal",range:"min",max:15,value:8,slide:l,change:l});var b=function(t){return function(e,a){var r,n;r=[],n=new RegExp(e,"i"),jQuery.each(t,function(t,e){n.test(e)&&r.push(e)}),a(r)}};$("#searchArea, #search").typeahead({hint:!1,highlight:!0,minLength:2},{name:"title",source:b(g)})}();